{{> header}}

<!-- Main Content -->
<div class="flex-container"
    style="display: flex; flex-direction: row; justify-content: flex-start; background-color: rgba(255, 255, 255, 0.75); padding: 10px; border-bottom: 2px solid black; width: 100%; ">

    <!-- User Info -->
    <div style="flex: 1; display: flex; flex-direction: column; align-items: center; padding-right: 20px;">
        <div style="display: flex; flex-direction: column; align-items: center;">
            {{#if user.photo}}
            <img src="{{user.photo}}" alt="User Avatar" style="width: 100px; height: 100px; margin-bottom: 10px;">
            {{else}}
            <img src="/images/default_user_avatar_120x120_v2.yji-de626b6fb1609a681724.png" alt="Default Avatar"
                style="width: 100px; height: 100px; margin-bottom: 10px;">
            {{/if}}
            <h1 style="margin-bottom: 5px;">{{user.username}}</h1>
            <h2 style="margin-top: 0;">{{user.country}}</h2>
        </div>

        <!-- Edit Profile Button -->
        <div style="display: flex; flex-direction: column; align-items: center;">
            <button id="edit-profile-btn">Edit Profile</button>

            <!-- Hidden Edit Profile Form -->
            <form id="edit-profile-form" action="/user/profile/edit" method="POST" style="display: none;">
                <label for="username">Username:</label>
                <input type="text" name="username" value="{{user.username}}" style="width: 100%; margin-bottom: 10px;">

                <label for="email">Email:</label>
                <input type="email" name="email" value="{{user.email}}" style="width: 100%; margin-bottom: 10px;">

                <label for="phone">Phone Number:</label>
                <input type="text" name="phone" value="{{user.phone}}" style="width: 100%; margin-bottom: 10px;">

                <label for="country">Country:</label>
                <input type="text" name="country" value="{{user.country}}" style="width: 100%; margin-bottom: 10px;">

                <label for="description">Bio:</label>
                <textarea name="description" style="width: 100%; margin-bottom: 10px;">{{user.description}}</textarea>

                <label for="photo">Profile Picture:</label>
                <input type="file" name="photo" accept="image/*" style="width: 100%; margin-bottom: 10px;">

                <button type="submit" style="margin-top: 10px;">Save Changes</button>
                <button type="button" id="cancel-edit-btn" style="margin-top: 10px;">Cancel</button>
            </form>

            <script>
                document.getElementById("edit-profile-btn").addEventListener("click", function () {
                    document.getElementById("edit-profile-form").style.display = "block";
                });
            </script>

        </div>

    </div>

    <!-- Reviews -->
    <div style="flex: 3; display: flex; flex-direction: column; padding-left: 20px;">
        <h2>Reviews</h2>
        {{#each reviews}}
        <div class="flex-container" style="border: 1px solid; border-radius: 25px; margin-top: 10px;">
            <h3>{{restaurant.name}}</h3>
            <h5>{{restaurant.address}}</h5>
            <p>{{text}}</p>
        </div>
        {{/each}}
    </div>
</div>
{{> footer}}